{"version":3,"sources":["webpack:///./assets/js/theme/product.js","webpack:///./assets/js/theme/product/reviews.js","webpack:///./assets/js/theme/product/video-gallery.js"],"names":["Product","context","url","window","location","href","$reviewLink","$","before","next","document","on","indexOf","history","replaceState","title","pathname","loaded","validator","collapsibleFactory","productDetails","ProductDetails","BCData","product_attributes","videoGallery","$reviewForm","classifyForm","review","Review","registerValidation","performCheck","areAll","after","productReviewHandler","trigger","PageManager","nod","submit","find","$reviewsContent","$collapsible","initLinkBind","injectPaginationLink","collapseReviews","$content","hasClass","CollapsibleEvents","click","hash","$nextLink","$prevLink","length","attr","add","selector","validate","errorMessage","reviewRating","reviewSubject","reviewComment","cb","val","result","forms","email","reviewEmail","VideoGallery","$element","$player","$videos","currentVideo","bindEvents","selectNewVideo","e","preventDefault","$target","currentTarget","id","data","$selectedThumb","setMainVideo","setActiveThumb","removeClass","addClass","bind","pluginKey","$videoGallery","each","index","element","$el","isInitialized"],"mappings":"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","file":"theme-bundle.chunk.1.js","sourcesContent":["/*\n Import all product specific js\n */\nimport $ from 'jquery';\nimport PageManager from './page-manager';\nimport Review from './product/reviews';\nimport collapsibleFactory from './common/collapsible';\nimport ProductDetails from './common/product-details';\nimport videoGallery from './product/video-gallery';\nimport { classifyForm } from './common/form-utils';\n\nexport default class Product extends PageManager {\n    constructor(context) {\n        super(context);\n        this.url = window.location.href;\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\n    }\n\n    before(next) {\n        // Listen for foundation modal close events to sanitize URL after review.\n        $(document).on('close.fndtn.reveal', () => {\n            if (this.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\n                window.history.replaceState(null, document.title, window.location.pathname);\n            }\n        });\n\n        next();\n    }\n\n    loaded(next) {\n        let validator;\n\n        // Init collapsible\n        collapsibleFactory();\n\n        this.productDetails = new ProductDetails($('.productView'), this.context, window.BCData.product_attributes);\n\n        videoGallery();\n\n        const $reviewForm = classifyForm('.writeReview-form');\n        const review = new Review($reviewForm);\n\n        $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', () => {\n            validator = review.registerValidation(this.context);\n        });\n\n        $reviewForm.on('submit', () => {\n            if (validator) {\n                validator.performCheck();\n                return validator.areAll('valid');\n            }\n\n            return false;\n        });\n\n        next();\n    }\n\n    after(next) {\n        this.productReviewHandler();\n\n        next();\n    }\n\n    productReviewHandler() {\n        if (this.url.indexOf('#write_review') !== -1) {\n            this.$reviewLink.trigger('click');\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/product.js","import $ from 'jquery';\nimport nod from '../common/nod';\nimport { CollapsibleEvents } from '../common/collapsible';\nimport forms from '../common/models/forms';\n\nexport default class {\n    constructor($reviewForm) {\n        this.validator = nod({\n            submit: $reviewForm.find('input[type=\"submit\"]'),\n        });\n\n        this.$reviewsContent = $('#product-reviews');\n        this.$collapsible = $('[data-collapsible]', this.$reviewsContent);\n\n        this.initLinkBind();\n        this.injectPaginationLink();\n        this.collapseReviews();\n    }\n\n    /**\n     * On initial page load, the user clicks on \"(12 Reviews)\" link\n     * The browser jumps to the review page and should expand the reviews section\n     */\n    initLinkBind() {\n        const $content = $('#productReviews-content', this.$reviewsContent);\n\n        $('.productView-reviewLink').on('click', () => {\n            if (!$content.hasClass('is-open')) {\n                this.$collapsible.trigger(CollapsibleEvents.click);\n            }\n        });\n    }\n\n    collapseReviews() {\n        // We're in paginating state, do not collapse\n        if (window.location.hash && window.location.hash.indexOf('#product-reviews') === 0) {\n            return;\n        }\n\n        // force collapse on page load\n        this.$collapsible.trigger(CollapsibleEvents.click);\n    }\n\n    /**\n     * Inject ID into the pagination link\n     */\n    injectPaginationLink() {\n        const $nextLink = $('.pagination-item--next .pagination-link', this.$reviewsContent);\n        const $prevLink = $('.pagination-item--previous .pagination-link', this.$reviewsContent);\n\n        if ($nextLink.length) {\n            $nextLink.attr('href', `${$nextLink.attr('href')} #product-reviews`);\n        }\n\n        if ($prevLink.length) {\n            $prevLink.attr('href', `${$prevLink.attr('href')} #product-reviews`);\n        }\n    }\n\n    registerValidation(context) {\n        this.context = context;\n        this.validator.add([{\n            selector: '[name=\"revrating\"]',\n            validate: 'presence',\n            errorMessage: this.context.reviewRating,\n        }, {\n            selector: '[name=\"revtitle\"]',\n            validate: 'min-length:2',\n            errorMessage: this.context.reviewSubject,\n        }, {\n            selector: '[name=\"revtext\"]',\n            validate: 'min-length:2',\n            errorMessage: this.context.reviewComment,\n        }, {\n            selector: '[name=\"email\"]',\n            validate: (cb, val) => {\n                const result = forms.email(val);\n                cb(result);\n            },\n            errorMessage: this.context.reviewEmail,\n        }]);\n\n        return this.validator;\n    }\n\n    validate() {\n        return this.validator.performCheck();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/product/reviews.js","import $ from 'jquery';\n\nexport class VideoGallery {\n    constructor($element) {\n        this.$player = $element.find('[data-video-player]');\n        this.$videos = $element.find('[data-video-item]');\n        this.currentVideo = {};\n        this.bindEvents();\n    }\n\n    selectNewVideo(e) {\n        e.preventDefault();\n\n        const $target = $(e.currentTarget);\n\n        this.currentVideo = {\n            id: $target.data('videoId'),\n            $selectedThumb: $target,\n        };\n\n        this.setMainVideo();\n        this.setActiveThumb();\n    }\n\n    setMainVideo() {\n        this.$player.attr('src', `//www.youtube.com/embed/${this.currentVideo.id}`);\n    }\n\n    setActiveThumb() {\n        this.$videos.removeClass('is-active');\n        this.currentVideo.$selectedThumb.addClass('is-active');\n    }\n\n    bindEvents() {\n        this.$videos.on('click', this.selectNewVideo.bind(this));\n    }\n}\n\nexport default function videoGallery() {\n    const pluginKey = 'video-gallery';\n    const $videoGallery = $(`[data-${pluginKey}]`);\n\n    $videoGallery.each((index, element) => {\n        const $el = $(element);\n        const isInitialized = $el.data(pluginKey) instanceof VideoGallery;\n\n        if (isInitialized) {\n            return;\n        }\n\n        $el.data(pluginKey, new VideoGallery($el));\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/product/video-gallery.js"],"sourceRoot":""}